---
interface Props {
  items: {
    question: string;
    answer: string;
  }[];
}

const { items } = Astro.props;
---

<div class="space-y-4">
  {
    items.map((item, index) => (
      <div class="group border border-slate-200 dark:border-slate-700 rounded-2xl bg-white dark:bg-slate-800 overflow-hidden transition-all duration-300 hover:shadow-md">
        <button
          class="faq-toggle flex items-center justify-between w-full p-5 text-left focus:outline-none"
          aria-expanded="false"
          aria-controls={`faq-answer-${index}`}
        >
          <span class="text-lg font-semibold text-slate-800 dark:text-slate-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
            {item.question}
          </span>
          <span class="icon-wrapper relative flex items-center justify-center w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 transition-all duration-300 group-hover:bg-blue-50 dark:group-hover:bg-blue-900/30 group-hover:text-blue-600 dark:group-hover:text-blue-400">
            <svg
              class="w-5 h-5 transform transition-transform duration-300"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </span>
        </button>
        <div
          id={`faq-answer-${index}`}
          class="faq-content hidden px-5 pb-5 text-slate-600 dark:text-slate-300 leading-relaxed"
        >
          <div class="pt-2 border-t border-slate-100 dark:border-slate-700/50">
            <p>{item.answer}</p>
          </div>
        </div>
      </div>
    ))
  }
</div>

<script>
  // L贸gica simple para el acorde贸n
  const toggles = document.querySelectorAll(".faq-toggle");

  toggles.forEach((toggle) => {
    toggle.addEventListener("click", () => {
      const content = toggle.nextElementSibling;
      const icon = toggle.querySelector("svg");
      const isExpanded = toggle.getAttribute("aria-expanded") === "true";

      // Cerrar otros (opcional, estilo acorde贸n estricto)
      // document.querySelectorAll('.faq-content').forEach(el => {
      //   if (el !== content) el.classList.add('hidden');
      // });
      // document.querySelectorAll('.faq-toggle').forEach(el => {
      //   if (el !== toggle) {
      //     el.setAttribute('aria-expanded', 'false');
      //     el.querySelector('svg')?.classList.remove('rotate-180');
      //   }
      // });

      // Toggle actual
      toggle.setAttribute("aria-expanded", (!isExpanded).toString());
      content?.classList.toggle("hidden");
      icon?.classList.toggle("rotate-180");

      // Animaci贸n suave de entrada
      if (!isExpanded) {
        content?.classList.add("animate-fade-down");
      } else {
        content?.classList.remove("animate-fade-down");
      }
    });
  });
</script>

<style>
  .animate-fade-down {
    animation: fadeDown 0.3s ease-out forwards;
  }

  @keyframes fadeDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
