---
// src/components/FloatingButtons.astro
---

<!-- 
  Botón de scroll to top
  - Mobile: bottom-[86px] (20px chat + 56px altura + 10px espacio), right-5 (20px), w-[56px]
  - Desktop: bottom-[100px] (24px chat + 60px altura + 16px espacio), right-6 (24px), w-[60px]
  - pointer-events-none: Para que el contenedor no bloquee clicks alrededor
-->
<div
  class="fixed bottom-[86px] right-5 w-[56px] sm:bottom-[100px] sm:right-6 sm:w-[60px] z-40 flex flex-col items-center pointer-events-none"
>
  <!-- SCROLL TO TOP BUTTON -->
  <!-- Lógica: Oculto por defecto, aparece con JS. Estilo Glassmorphism neutro -->
  <button
    id="scroll-to-top"
    onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
    class="group flex h-12 w-12 translate-y-10 items-center justify-center rounded-full border border-slate-200 bg-white/80 p-0 text-slate-500 opacity-0 shadow-lg shadow-slate-200/50 backdrop-blur-md transition-all duration-500 hover:-translate-y-1 hover:scale-110 hover:border-blue-200 hover:text-blue-600 pointer-events-none dark:border-white/10 dark:bg-slate-900/80 dark:text-slate-400 dark:shadow-black/30"
    aria-label="Volver arriba"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5 transition-transform duration-300 group-hover:-translate-y-0.5"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2.5"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path d="M12 19V5M5 12l7-7 7 7"></path>
    </svg>
  </button>
</div>

<script>
  // Logic to Toggle "Back to Top" visibility
  // Script is embedded to work instantly on the component
  document.addEventListener("DOMContentLoaded", () => {
    const scrollBtn = document.getElementById("scroll-to-top");
    const SHOW_THRESHOLD = 300;

    const toggleScrollBtn = () => {
      if (!scrollBtn) return;

      if (window.scrollY > SHOW_THRESHOLD) {
        scrollBtn.classList.remove(
          "opacity-0",
          "translate-y-10",
          "pointer-events-none",
        );
        scrollBtn.classList.add(
          "opacity-100",
          "translate-y-0",
          "pointer-events-auto",
        );
      } else {
        scrollBtn.classList.remove(
          "opacity-100",
          "translate-y-0",
          "pointer-events-auto",
        );
        scrollBtn.classList.add(
          "opacity-0",
          "translate-y-10",
          "pointer-events-none",
        );
      }
    };

    // Add Listener with passive option for performance
    window.addEventListener("scroll", toggleScrollBtn, { passive: true });

    // Initial check
    toggleScrollBtn();
  });
</script>
