---
// src/pages/index.astro
import BaseLayout from "../layouts/BaseLayout.astro";
import { Image } from "astro:assets";
import gridManImage from "../assets/grid-man-image-compress.webp"; // Mantenemos la imagen existente
import Testimonials from "../components/Testimonials.astro";
import Button from "../components/ui/Button.astro";
import "../styles/user.css";

// Metadatos para SEO Local y Conversión
const pageTitle = "Línea Digital | Distribuidor Autorizado Telcel Premium";
const pageDesc =
  "Líderes en telefonía Telcel en Chiapas. Planes 5G, Equipos al mayoreo, Servicios Empresariales y Soluciones IoT. Cotiza hoy mismo.";
---

<BaseLayout title={pageTitle} description={pageDesc}>
  <!-- === HERO SECTION: IMPACTO INMEDIATO === -->
  <section class="relative pt-12 pb-20 lg:pt-24 lg:pb-32 overflow-hidden">
    <!-- Elemento Decorativo de Fondo (Glow Telcel) -->
    <div
      class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-[500px] bg-blue-500/20 dark:bg-blue-600/10 blur-[120px] rounded-full pointer-events-none z-0"
    >
    </div>

    <div class="relative z-10 mx-auto max-w-7xl px-6 lg:px-8 text-center">
      <!-- Trust Badge / Novedad -->
      <div
        class="inline-flex items-center gap-2 rounded-full border border-blue-200 bg-blue-50/50 px-3 py-1 text-sm font-medium text-blue-700 backdrop-blur-md mb-8 dark:border-blue-500/30 dark:bg-blue-900/20 dark:text-blue-300 animate-fade-in-up"
      >
        <span class="relative flex h-2 w-2">
          <span
            class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"
          ></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"
          ></span>
        </span>
        Distribuidor Autorizado Premium
      </div>

      <!-- H1: Copywriting Orientado a Beneficio -->
      <h1
        class="mx-auto max-w-4xl text-5xl font-bold tracking-tight text-slate-900 sm:text-7xl dark:text-white mb-6 text-balance"
      >
        Conectamos tu mundo <br class="hidden sm:block" />
        <span
          class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-blue-400 dark:from-blue-400 dark:to-blue-200"
        >
          a la velocidad de 5G.
        </span>
      </h1>

      <p
        class="mx-auto mt-6 max-w-2xl text-lg leading-8 text-slate-600 dark:text-slate-300"
      >
        Ya sea para renovar tu smartphone personal, equipar a tu fuerza de
        ventas o iniciar tu propio negocio de recargas. Tenemos la solución
        Telcel exacta para ti.
      </p>

      <!-- CTAs: Segmentation B2C vs B2B -->
      <div
        class="mt-10 flex flex-col sm:flex-row items-center justify-center gap-4"
      >
        <Button
          href="/personas"
          variant="primary"
          size="lg"
          class="w-full sm:w-auto shadow-lg shadow-blue-500/25"
        >
          Ver Equipos y Planes
        </Button>
        <Button
          href="/contacto"
          variant="secondary"
          size="lg"
          class="w-full sm:w-auto bg-white dark:bg-white/5 border-slate-200 dark:border-white/10 hover:bg-slate-50 dark:hover:bg-white/10"
        >
          Cotizar para Empresa
        </Button>
      </div>

      <!-- Social Proof / Stats pequeña -->
      <div
        class="mt-12 flex items-center justify-center gap-x-8 gap-y-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex-wrap"
      >
        <span class="flex items-center gap-2">
          <svg
            class="w-4 h-4 text-green-500"
            fill="currentColor"
            viewBox="0 0 20 20"
            ><path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
              clip-rule="evenodd"></path></svg
          >
          Garantía Oficial
        </span>
        <span class="flex items-center gap-2">
          <svg
            class="w-4 h-4 text-green-500"
            fill="currentColor"
            viewBox="0 0 20 20"
            ><path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
              clip-rule="evenodd"></path></svg
          >
          Envíos Seguros
        </span>
        <span class="flex items-center gap-2">
          <svg
            class="w-4 h-4 text-green-500"
            fill="currentColor"
            viewBox="0 0 20 20"
            ><path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
              clip-rule="evenodd"></path></svg
          >
          Soporte Local
        </span>
      </div>
    </div>
  </section>

  <!-- === BENTO GRID COMERCIAL (The Core) === -->
  <section
    class="py-12 md:py-24 px-6 bg-slate-50 dark:bg-[#0B1120] transition-colors duration-500"
  >
    <div class="mx-auto max-w-7xl">
      <div class="mb-12 md:text-center max-w-3xl mx-auto">
        <h2
          class="text-3xl font-bold tracking-tight text-slate-900 dark:text-white sm:text-4xl"
        >
          Un ecosistema de soluciones.
        </h2>
        <p class="mt-4 text-lg text-slate-600 dark:text-slate-400">
          Diseñamos nuestra oferta para cubrir cada necesidad: desde el usuario
          exigente hasta el corporativo multinacional.
        </p>
      </div>

      <!-- GRID LAYOUT -->
      <div
        class="grid grid-cols-1 md:grid-cols-3 md:grid-rows-2 gap-6 h-auto md:h-[800px]"
      >
        <!-- CARD 1: PERSONAL (Main Feature - 2 Cols Wide) -->
        <article
          class="group relative md:col-span-2 md:row-span-2 overflow-hidden rounded-[2.5rem] bg-white dark:bg-[#151e2e] border border-slate-200 dark:border-white/10 shadow-xl shadow-slate-200/50 dark:shadow-none flex flex-col justify-between"
        >
          <!-- Background Image / Gradient Placeholder -->
          <div
            class="absolute inset-0 bg-gradient-to-br from-slate-50 to-blue-50 dark:from-[#151e2e] dark:to-[#1e293b] z-0"
          >
          </div>

          <!-- Content -->
          <div class="relative z-10 p-8 md:p-12">
            <div
              class="inline-flex items-center gap-2 rounded-full bg-blue-100 dark:bg-blue-900/30 px-3 py-1 text-xs font-bold uppercase tracking-wider text-blue-700 dark:text-blue-300 mb-4"
            >
              Para Ti
            </div>
            <h3
              class="text-3xl md:text-5xl font-bold text-slate-900 dark:text-white mb-4 tracking-tight"
            >
              Estrena Smartphone hoy.
            </h3>
            <p class="text-lg text-slate-600 dark:text-slate-400 max-w-md mb-8">
              Los últimos modelos de iPhone, Samsung y Xiaomi disponibles en
              Amigo Kit o Plan de Renta. Paga a meses o usa tus puntos.
            </p>
            <Button
              href="/personas"
              variant="primary"
              class="rounded-full px-8"
            >
              Ver Catálogo
            </Button>
          </div>

          <!-- Image Composition -->
          <div
            class="relative z-10 mt-auto flex justify-center translate-y-8 md:translate-y-12 transition-transform duration-700 group-hover:translate-y-4"
          >
            <!-- Usamos la imagen existente con un tratamiento visual mejorado -->
            <div class="relative w-[80%] max-w-md">
              <div
                class="absolute -inset-1 bg-gradient-to-t from-blue-500 to-transparent opacity-20 blur-xl rounded-full"
              >
              </div>
              <Image
                src={gridManImage}
                alt="Smartphone Telcel 5G"
                class="relative z-10 w-full drop-shadow-2xl rounded-t-3xl border-t border-x border-white/20"
              />
            </div>
          </div>
        </article>

        <!-- CARD 2: EMPRESAS (Top Right) -->
        <article
          class="group relative overflow-hidden rounded-[2.5rem] bg-slate-900 dark:bg-[#0f172a] border border-slate-200 dark:border-white/10 p-8 flex flex-col justify-center"
        >
          <!-- Decorative Pattern -->
          <div
            class="absolute inset-0 opacity-20"
            style="background-image: radial-gradient(#3b82f6 1px, transparent 1px); background-size: 20px 20px;"
          >
          </div>

          <div class="relative z-10">
            <div
              class="h-10 w-10 rounded-xl bg-blue-600 flex items-center justify-center text-white mb-6 shadow-lg shadow-blue-600/30"
            >
              <span class="material-icons-round text-2xl">business_center</span>
            </div>
            <h3 class="text-2xl font-bold text-white mb-2">Empresas</h3>
            <p class="text-slate-400 text-sm mb-6 leading-relaxed">
              Planes deducibles, control de flotillas y soluciones IoT para
              monitoreo. Optimiza costos operativos.
            </p>
            <a
              href="/empresas"
              class="inline-flex items-center text-blue-400 font-bold text-sm hover:text-blue-300 transition-colors"
            >
              Solicitar consultoría <span
                class="material-icons-round text-sm ml-1">arrow_forward</span
              >
            </a>
          </div>
        </article>

        <!-- CARD 3: MAYOREO / SOCIOS (Bottom Right) -->
        <article
          class="group relative overflow-hidden rounded-[2.5rem] bg-white dark:bg-[#1a2333] border border-slate-200 dark:border-white/10 p-8 flex flex-col justify-center transition-all hover:border-blue-400/50"
        >
          <div class="relative z-10">
            <div
              class="h-10 w-10 rounded-xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400 mb-6"
            >
              <span class="material-icons-round text-2xl">attach_money</span>
            </div>
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">
              Vende y Gana
            </h3>
            <p
              class="text-slate-600 dark:text-slate-400 text-sm mb-6 leading-relaxed"
            >
              Precio especial en Chips, Tiempo Aire y Equipos para revendedores.
              Haz crecer tu negocio con Telcel.
            </p>
            <a
              href="/asociados"
              class="inline-flex items-center text-slate-900 dark:text-white font-bold text-sm hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
            >
              Quiero ser distribuidor <span
                class="material-icons-round text-sm ml-1">arrow_forward</span
              >
            </a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- === LOCATIONS SECTION: APPLE MAPS STYLE === -->
  <section
    class="py-16 md:py-24 px-6 bg-white dark:bg-[#0B1120] border-t border-slate-200 dark:border-white/5 transition-colors duration-500"
  >
    <div class="mx-auto max-w-7xl">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
        <!-- Lista de Sucursales (Columna Izquierda) -->
        <div class="lg:col-span-5 flex flex-col gap-6">
          <div class="mb-4">
            <span
              class="text-blue-600 dark:text-blue-400 font-bold uppercase tracking-wider text-xs"
              >Visítanos</span
            >
            <h2 class="text-3xl font-bold text-slate-900 dark:text-white mt-2">
              Nuestras Oficinas
            </h2>
            <p class="text-slate-600 dark:text-slate-400 mt-2">
              Atención personalizada y soporte técnico.
            </p>
          </div>

          <!-- Card: Tuxtla -->
          <button
            class="location-card group text-left w-full p-6 rounded-2xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5 transition-all duration-300 hover:border-blue-500/50 hover:shadow-lg active:scale-[0.99] focus:outline-none ring-offset-2 focus:ring-2 ring-blue-500"
            data-location="tuxtla"
            onclick="showMap('tuxtla')"
            id="btn-tuxtla"
          >
            <div class="flex justify-between items-start">
              <div>
                <h3 class="font-bold text-lg text-slate-900 dark:text-white">
                  Corporativo Tuxtla
                </h3>
                <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">
                  1a Av. Norte Poniente #834
                </p>
              </div>
              <div
                class="h-8 w-8 rounded-full bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center text-blue-600 dark:text-blue-400 card-arrow opacity-0 group-hover:opacity-100 transition-opacity"
              >
                <span class="material-icons-round text-sm"
                  >arrow_forward_ios</span
                >
              </div>
            </div>
            <div
              class="mt-4 pt-4 border-t border-slate-200 dark:border-white/10 flex items-center gap-4 text-xs font-medium text-slate-500"
            >
              <span class="flex items-center gap-1"
                ><span class="material-icons-round text-sm">schedule</span> 9am -
                6pm</span
              >
              <span
                class="flex items-center gap-1 text-green-600 dark:text-green-400"
                ><span class="material-icons-round text-sm">check_circle</span> Abierto</span
              >
            </div>
          </button>

          <!-- Card: Tapachula -->
          <button
            class="location-card group text-left w-full p-6 rounded-2xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5 transition-all duration-300 hover:border-blue-500/50 hover:shadow-lg active:scale-[0.99] focus:outline-none ring-offset-2 focus:ring-2 ring-blue-500"
            data-location="tapachula"
            onclick="showMap('tapachula')"
            id="btn-tapachula"
          >
            <div class="flex justify-between items-start">
              <div>
                <h3 class="font-bold text-lg text-slate-900 dark:text-white">
                  Corporativo Tapachula
                </h3>
                <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">
                  4a. Av. Nte. 70, Los Naranjos
                </p>
              </div>
              <div
                class="h-8 w-8 rounded-full bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center text-blue-600 dark:text-blue-400 card-arrow opacity-0 group-hover:opacity-100 transition-opacity"
              >
                <span class="material-icons-round text-sm"
                  >arrow_forward_ios</span
                >
              </div>
            </div>
            <div
              class="mt-4 pt-4 border-t border-slate-200 dark:border-white/10 flex items-center gap-4 text-xs font-medium text-slate-500"
            >
              <span class="flex items-center gap-1"
                ><span class="material-icons-round text-sm">schedule</span> 9am -
                6pm</span
              >
              <span
                class="flex items-center gap-1 text-green-600 dark:text-green-400"
                ><span class="material-icons-round text-sm">check_circle</span> Abierto</span
              >
            </div>
          </button>
        </div>

        <!-- Visualizador de Mapa (Columna Derecha - Sticky) -->
        <div class="lg:col-span-7 relative h-[400px] lg:h-[500px]">
          <div
            class="absolute inset-0 rounded-3xl overflow-hidden border border-slate-200 dark:border-white/10 shadow-2xl bg-slate-100 dark:bg-[#151e2e]"
          >
            <!-- Contenedor de Maps con efecto de transición -->

            <!-- Map: Tuxtla -->
            <div
              id="tuxtla-map"
              class="map-container absolute inset-0 transition-all duration-500 z-10"
            >
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3820.4196777143943!2d-93.1224185!3d16.7557832!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85ecd8f3d3af5e09%3A0xedacab470275254a!2sLinea%20Digital%20del%20Sureste!5e0!3m2!1ses-419!2smx!4v1741478607844!5m2!1ses-419!2smx"
                class="w-full h-full grayscale-[50%] hover:grayscale-0 transition-all duration-700 dark:invert-[90%] dark:hue-rotate-180 dark:contrast-125"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                title="Ubicación Tuxtla Gutiérrez"></iframe>
              <!-- Overlay para estilizar modo oscuro si el iframe no soporta dark mode nativo -->
              <div
                class="absolute inset-0 pointer-events-none mix-blend-overlay bg-blue-900/10 dark:bg-blue-900/20"
              >
              </div>
            </div>

            <!-- Map: Tapachula -->
            <div
              id="tapachula-map"
              class="map-container absolute inset-0 transition-all duration-500 opacity-0 pointer-events-none z-0"
            >
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3855.4472567510143!2d-92.2621971!3d14.912154999999998!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x858e0ed8913f73ad%3A0xab0ea708b27df293!2sL%C3%ADnea%20Digital%20del%20Sureste%20Tapachula!5e0!3m2!1sen!2smx!4v1763676826030!5m2!1sen!2smx"
                class="w-full h-full grayscale-[50%] hover:grayscale-0 transition-all duration-700 dark:invert-[90%] dark:hue-rotate-180 dark:contrast-125"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                title="Ubicación Tapachula"></iframe>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <div class="bg-slate-50 dark:bg-[#0f1520] transition-colors duration-500">
    <Testimonials />
  </div>

  <!-- === LOGICA TS === -->
  <script>
    // Declaración de tipos para TypeScript en Astro
    declare global {
      interface Window {
        showMap: (location: string) => void;
      }
    }

    let activeLocation = "tuxtla";

    function updateUI(locationId: string) {
      const locations = ["tuxtla", "tapachula"];

      locations.forEach((loc) => {
        const isSelected = loc === locationId;

        // 1. Manejo del Mapa
        const mapEl = document.getElementById(loc + "-map");
        if (mapEl) {
          if (isSelected) {
            mapEl.style.opacity = "1";
            mapEl.style.zIndex = "10";
            mapEl.style.pointerEvents = "auto";
          } else {
            mapEl.style.opacity = "0";
            mapEl.style.zIndex = "0";
            mapEl.style.pointerEvents = "none";
          }
        }

        // 2. Manejo de Botones (Estilo Activo)
        const btnEl = document.querySelector(`button[data-location="${loc}"]`);
        if (btnEl) {
          if (isSelected) {
            btnEl.classList.add(
              "ring-2",
              "ring-blue-500",
              "bg-white",
              "dark:bg-[#1a2333]",
              "shadow-md",
            );
            btnEl.classList.remove(
              "bg-slate-50",
              "dark:bg-white/5",
              "border-slate-200",
            );
            // Mostrar flecha
            const arrow = btnEl.querySelector(".card-arrow");
            if (arrow) arrow.classList.remove("opacity-0");
          } else {
            btnEl.classList.remove(
              "ring-2",
              "ring-blue-500",
              "bg-white",
              "dark:bg-[#1a2333]",
              "shadow-md",
            );
            btnEl.classList.add(
              "bg-slate-50",
              "dark:bg-white/5",
              "border-slate-200",
            );
            // Ocultar flecha
            const arrow = btnEl.querySelector(".card-arrow");
            if (arrow) arrow.classList.add("opacity-0");
          }
        }
      });
    }

    // Exponer función globalmente
    window.showMap = (location) => {
      if (activeLocation === location) return;
      activeLocation = location;
      updateUI(location);
    };

    // Init
    document.addEventListener("DOMContentLoaded", () => {
      updateUI("tuxtla");
    });
  </script>
</BaseLayout>
