---
// src/pages/index.astro
import BaseLayout from "../layouts/BaseLayout.astro";
import { Image } from "astro:assets";
import liaEjecutivaImage from "../assets/lia-ejecutiva.png"; // Nueva imagen de L√≠a
import liaHeroImage from "../assets/lia-index.png"; // Nueva imagen de L√≠a
import Testimonials from "../components/sections/Testimonials.astro";
import Button from "../components/ui/Button.astro";
import "../styles/user.css";

// Metadatos para SEO Local y Conversi√≥n
const pageTitle = "L√≠nea Digital | Distribuidor Autorizado Telcel Premium";
const pageDesc =
  "L√≠deres en telefon√≠a Telcel en Chiapas. Planes 5G, Equipos al mayoreo, Servicios Empresariales y Soluciones IoT. Cotiza hoy mismo.";
---

<BaseLayout title={pageTitle} description={pageDesc}>
  <!-- === HERO SECTION: CINEMATIC L√çA === -->
  <section
    class="relative min-h-[90vh] lg:min-h-[calc(100vh-5rem)] w-full overflow-visible flex items-end lg:items-center"
  >
    <!-- 1. AMBIENTE DE FONDO (Texture & Atmosphere) -->
    <div class="absolute inset-0 z-0">
      <!-- Luz de acento Cyan detr√°s de L√≠a -->
      <div
        class="absolute bottom-0 right-[-10%] w-[80vw] h-[80vw] lg:w-[800px] lg:h-[800px] bg-blue-600/20 rounded-full blur-[120px] mix-blend-screen animate-pulse-slow"
      >
      </div>
    </div>

    <!-- 2. L√çA (EL PERSONAJE HEROICO) - LAYERED COMPOSITION -->
    <!-- En m√≥vil la ponemos absoluta al fondo para que quede detr√°s del texto con opacidad. En Desktop a la derecha Full HD -->
    <div
      class="absolute bottom-20 -right-44 z-10 w-full h-full lg:w-[60%] flex items-end justify-center lg:justify-end overflow-visible pointer-events-none"
    >
      <!-- Contenedor de la Imagen con M√°scaras -->
      <div
        class="relative h-[60%] lg:h-[90%] w-auto max-w-none transition-transform duration-1000 ease-out translate-y-10 lg:translate-y-0 lg:-translate-x-16 lg:mr-16"
      >
        <Image
          src={liaHeroImage}
          alt="L√≠a Asistente Virtual"
          class="h-full w-auto object-cover object-top mask-gradient-b"
          loading="eager"
        />

        <!-- C. M√ÅSCARA M√ìVIL: Oscurece a L√≠a en m√≥vil para que el texto blanco se lea encima -->
        <div
          class="absolute inset-0 bg-gradient-to-t from-[#020617] via-[#020617]/80 to-transparent lg:hidden"
        >
        </div>
      </div>
    </div>

    <!-- 3. CONTENIDO UI (Texto y Botones) -->
    <div class="container relative z-20 mx-auto px-6 pb-20 pt-32 lg:py-0">
      <div class="max-w-2xl lg:max-w-3xl">
        <!-- Badge -->
        <div
          class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-blue-50 border border-blue-200/60 dark:bg-blue-900/20 dark:border-blue-500/20 mb-8 backdrop-blur-sm"
        >
          <span
            class="w-2 h-2 rounded-full bg-blue-600 dark:bg-blue-400 animate-pulse"
          ></span>
          <span
            class="text-xs font-bold uppercase tracking-widest text-blue-700 dark:text-blue-300"
            >DISTRIBUIDOR AUTORIZADO TELCEL</span
          >
        </div>

        <!-- T√≠tulo Grande -->
        <h1
          class="text-5xl sm:text-6xl lg:text-8xl font-black dark:text-white tracking-tighter leading-[0.95] mb-8 drop-shadow-xl animate-fade-in-up animation-delay-100"
        >
          Conectamos tu mundo a la velocidad de 5G de <span
            class="text-transparent bg-clip-text bg-gradient-to-b from-blue-400 to-blue-700 dark:from-blue-400 dark:to-blue-200"
            >Telcel.</span
          >
        </h1>

        <p
          class="text-xl text-slate-600 dark:text-slate-300 font-medium leading-relaxed mb-10 max-w-2xl"
        >
          Ya sea para renovar tu <strong>smartphone personal</strong>, equipar a
          tu fuerza de ventas o iniciar tu propio negocio de recargas. Tenemos
          la soluci√≥n Telcel exacta para ti.
        </p>

        <!-- Botones -->
        <div
          class="flex flex-col sm:flex-row gap-4 animate-fade-in-up animation-delay-300"
        >
          <Button
            href="/personas"
            variant="primary"
            size="xl"
            class="shadow-blue-500/20 group"
          >
            <span class="flex items-center gap-3">
              Ver Equipos y Planes
              <!-- Icono Chat animado -->
              <span class="w-2 h-2 bg-white rounded-full animate-bounce"></span>
            </span>
          </Button>
          <Button
            href="/empresas"
            variant="secondary"
            size="xl"
            class="bg-white/5 border-white/10 text-white hover:bg-white/10"
          >
            Cotizar para Empresa
          </Button>
        </div>
      </div>
    </div>
  </section>

  <style>
    /* Animaci√≥n de Flotaci√≥n para la burbuja */
    @keyframes float-slow {
      0%,
      100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
    }
    .animate-float-slow {
      animation: float-slow 5s ease-in-out infinite;
    }

    /* M√°scara para desvanecer la parte inferior de la imagen */
    .mask-gradient-b {
      mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
      -webkit-mask-image: linear-gradient(
        to bottom,
        black 80%,
        transparent 100%
      );
    }
  </style>

  <!-- === BENTO GRID COMERCIAL (The Core) === -->
  <section class="py-12 md:py-24 px-6 transition-colors duration-500 relative">
    <!--   <div class="absolute right-0 top-64 -z-10">
      <img src="/token-sale-shape.svg" alt="shape" />
    </div> -->
    <div class="absolute bottom-0 left-0 right-0 z-[-1]">
      <img src="/shape.svg" alt="shape" class="w-full" />
    </div>
    <div class="mx-auto max-w-7xl">
      <div class="mb-12 md:text-center max-w-3xl mx-auto">
        <h2
          class="text-3xl md:text-5xl font-black text-slate-900 dark:text-white tracking-tight mb-4 leading-tight text-center"
        >
          Un ecosistema de soluciones.
        </h2>
        <p
          class="text-xl text-slate-600 dark:text-slate-300 font-medium leading-relaxed mb-10 max-w-2xl mx-auto text-center"
        >
          Dise√±amos nuestra oferta para cubrir cada necesidad: desde el usuario
          exigente hasta el corporativo multinacional.
        </p>
      </div>

      <!-- GRID LAYOUT -->
      <div
        class="grid grid-cols-1 md:grid-cols-3 md:grid-rows-2 gap-6 h-auto md:h-[800px] relative"
      >
        <!-- CARD 1: PERSONAL (Hero Feature - L√≠a) -->
        <article
          class="group relative md:col-span-2 md:row-span-2 overflow-hidden rounded-[2rem] md:rounded-[2.5rem] bg-white dark:bg-[#151e2e] border border-slate-200 dark:border-white/5 shadow-xl shadow-slate-200/50 dark:shadow-2xl flex flex-col md:flex-row items-center justify-between min-h-[550px] md:min-h-[500px]"
        >
          <!-- A. Fondos Din√°micos -->
          <div
            class="absolute inset-0 bg-gradient-to-br from-white via-slate-50 to-blue-50 dark:from-[#1a2333] dark:via-[#0f172a] dark:to-black z-0"
          >
          </div>
          <!-- Ambient Glow (Spotlight) -->
          <div
            class="absolute top-[-50%] left-[-20%] w-[70%] h-[100%] bg-blue-500/5 dark:bg-blue-600/10 blur-[120px] rounded-full pointer-events-none z-0 animate-pulse-slow"
          >
          </div>

          <!-- B. CONTENIDO DE TEXTO (Lado Izquierdo / Arriba en m√≥vil) -->
          <div
            class="relative z-20 p-6 md:p-12 lg:p-14 w-full md:w-[55%] flex flex-col justify-center text-center md:text-left h-full"
          >
            <!-- Badge -->
            <div
              class="inline-flex items-center gap-2 self-center md:self-start rounded-lg bg-blue-50 border border-blue-100 text-blue-700 dark:bg-blue-500/10 dark:border-blue-500/20 dark:text-blue-300 px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest mb-6 backdrop-blur-sm shadow-sm dark:shadow-[0_0_15px_rgba(59,130,246,0.1)]"
            >
              <span class="relative flex h-2 w-2">
                <span
                  class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"
                ></span>
                <span
                  class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"
                ></span>
              </span>
              Disponible Ahora
            </div>

            <!-- T√≠tulo -->
            <h3
              class="text-4xl md:text-5xl lg:text-6xl font-black text-slate-900 dark:text-white mb-6 tracking-tighter leading-[1.1] drop-shadow-xl"
            >
              Estrena <br />
              <span
                class="text-transparent bg-clip-text bg-gradient-to-b from-blue-400 to-blue-700 dark:from-blue-400 dark:to-blue-200"
              >
                Smartphone.
              </span>
            </h3>

            <!-- Descripci√≥n (Con l√≠nea lateral) -->
            <div
              class="relative pl-0 md:pl-6 border-l-0 md:border-l-4 border-blue-400/30 dark:border-blue-500/30 mb-8"
            >
              <p
                class="text-lg text-slate-600 dark:text-slate-300 leading-relaxed"
              >
                Estrena hoy y paga poco a poco. Encuentra tu equipo ideal en
                Plan Tarifario Telcel o libre en Amigo Kit. Aceptamos tarjetas
                de cr√©dito, d√©bito y puntos para que la tecnolog√≠a 5G est√© a tu
                alcance.
              </p>
            </div>

            <!-- Bot√≥n -->
            <div class="flex justify-center md:justify-start">
              <Button
                href="/personas"
                variant="primary"
                class="rounded-2xl px-8 py-3 shadow-[0_10px_30px_-10px_rgba(37,99,235,0.5)]"
              >
                Ver Cat√°logo y Precios
              </Button>
            </div>
          </div>

          <!-- C. PERSONAJE L√çA (Lado Derecho / Abajo) -->
          <!-- Se sale del contenedor hacia abajo en mobile, y hacia la derecha en desktop -->
          <div
            class="relative md:absolute bottom-0 right-0 w-full md:w-[55%] h-[350px] md:h-full z-10 flex items-end justify-center md:justify-end overflow-visible pointer-events-none"
          >
            <!-- Glow detr√°s de ella -->
            <div
              class="absolute bottom-0 right-10 w-[80%] h-[70%] bg-blue-400/20 dark:bg-blue-700/20 blur-[90px] rounded-full dark:mix-blend-screen"
            >
            </div>

            <!-- Imagen con transici√≥n suave al Hover -->
            <div
              class="relative z-10 h-[110%] md:h-[80%] w-auto translate-y-10 md:translate-y-0 transition-transform duration-700 ease-out group-hover:scale-105 md:group-hover:translate-x-[-10px]"
            >
              <Image
                src={liaEjecutivaImage}
                alt="L√≠a recomendando Smartphone"
                class="w-auto h-full object-contain object-bottom drop-shadow-2xl"
              />

              <!-- Floating Bubble (Interactividad) -->
              <!--    <div
                class="absolute top-[35%] left-[-10px] md:left-0 bg-white/95 text-[#0B1120] p-3 rounded-xl rounded-bl-none shadow-lg animate-float opacity-0 group-hover:opacity-100 transition-opacity duration-500 delay-150 max-w-[140px] border border-blue-100"
              >
                <p class="text-xs font-bold leading-tight">üëã ¬°Hola!</p>
              </div> -->
            </div>
          </div>
        </article>
        <!-- CARD 2: EMPRESAS (Top Right) -->
        <article
          class="group relative overflow-hidden rounded-[2.5rem] bg-white dark:bg-[#0f172a] border border-slate-200 dark:border-white/10 p-8 flex flex-col justify-center shadow-xl shadow-slate-200/50 dark:shadow-none"
        >
          <!-- Decorative Pattern -->
          <div
            class="absolute inset-0 opacity-10 dark:opacity-20"
            style="background-image: radial-gradient(#3b82f6 1px, transparent 1px); background-size: 20px 20px;"
          >
          </div>

          <div class="relative z-10">
            <div
              class="h-10 w-10 rounded-xl bg-blue-600 flex items-center justify-center text-white mb-6 shadow-lg shadow-blue-600/30"
            >
              <span class="material-icons-round text-2xl">business</span>
            </div>
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">
              Soluciones Empresariales
            </h3>
            <p class="text-lg text-slate-600 dark:text-slate-400 max-w-md mb-8">
              Potencia tu empresa con planes a medida, desde 5 hasta +100
              l√≠neas. Optimiza costos con nuestros Paquetes de Internet
            </p>
            <a
              href="/empresas"
              class="inline-flex items-center text-blue-600 dark:text-blue-400 font-bold text-sm hover:text-blue-700 dark:hover:text-blue-300 transition-colors"
            >
              Cotizar Plan Empresarial <span
                class="material-icons-round text-sm ml-1">arrow_forward</span
              >
            </a>
          </div>
        </article>

        <!-- CARD 3: MAYOREO / SOCIOS (Bottom Right) -->
        <article
          class="group relative overflow-hidden rounded-[2.5rem] bg-white dark:bg-[#1a2333] border border-slate-200 dark:border-white/10 p-8 flex flex-col justify-center transition-all hover:border-blue-400/50"
        >
          <div class="relative z-10">
            <div
              class="h-10 w-10 rounded-xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400 mb-6"
            >
              <span class="material-icons-round text-2xl">attach_money</span>
            </div>
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">
              √önete como Asociado Comercial
            </h3>
            <p class="text-lg text-slate-600 dark:text-slate-400 max-w-md mb-8">
              Inicia tu propio negocio hoy mismo sin riesgos. Te damos acceso a
              precios preferenciales en Telefon√≠a y Recargas para que t√∫
              revendas y obtengas altos m√°rgenes de ganancia. Nosotros te
              respaldamos, t√∫ creces.
            </p>
            <a
              href="/asociados"
              class="inline-flex items-center text-slate-900 dark:text-white font-bold text-sm hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
            >
              Empezar a Vender <span class="material-icons-round text-sm ml-1"
                >arrow_forward</span
              >
            </a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- === LOCATIONS SECTION: APPLE MAPS STYLE === -->
  <section class="py-16 md:py-24 px-6 transition-colors duration-500 relative">
    <div class="absolute top-5 right-0 z-[-1]">
      <svg
        width="238"
        height="531"
        viewBox="0 0 238 531"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect
          opacity="0.3"
          x="422.819"
          y="-70.8145"
          width="196"
          height="541.607"
          rx="2"
          transform="rotate(51.2997 422.819 -70.8145)"
          fill="url(#paint0_linear_83:2)"></rect>
        <rect
          opacity="0.3"
          x="426.568"
          y="144.886"
          width="59.7544"
          height="541.607"
          rx="2"
          transform="rotate(51.2997 426.568 144.886)"
          fill="url(#paint1_linear_83:2)"></rect>
        <defs>
          <linearGradient
            id="paint0_linear_83:2"
            x1="517.152"
            y1="-251.373"
            x2="517.152"
            y2="459.865"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#4A6CF7"></stop>
            <stop offset="1" stop-color="#4A6CF7" stop-opacity="0"></stop>
          </linearGradient>
          <linearGradient
            id="paint1_linear_83:2"
            x1="455.327"
            y1="-35.673"
            x2="455.327"
            y2="675.565"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#4A6CF7"></stop>
            <stop offset="1" stop-color="#4A6CF7" stop-opacity="0"></stop>
          </linearGradient>
        </defs>
      </svg>
    </div>
    <div class="mx-auto max-w-7xl">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
        <!-- Lista de Sucursales (Columna Izquierda) -->
        <div class="lg:col-span-5 flex flex-col gap-6">
          <div class="mb-4">
            <span
              class="text-blue-600 dark:text-blue-400 font-bold uppercase tracking-wider text-xs"
              >Vis√≠tanos</span
            >
            <h2 class="text-3xl font-bold text-slate-900 dark:text-white mt-2">
              Nuestras Oficinas
            </h2>
            <p class="text-lg text-slate-600 dark:text-slate-400 max-w-md mb-8">
              Atenci√≥n personalizada y soporte t√©cnico.
            </p>
          </div>

          <!-- Card: Tuxtla -->
          <button
            class="location-card group text-left w-full p-6 rounded-2xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5 transition-all duration-300 hover:border-blue-500/50 hover:shadow-lg active:scale-[0.99] focus:outline-none ring-offset-2 focus:ring-2 ring-blue-500"
            data-location="tuxtla"
            onclick="showMap('tuxtla')"
            id="btn-tuxtla"
          >
            <div class="flex justify-between items-start">
              <div>
                <h3 class="font-bold text-lg text-slate-900 dark:text-white">
                  Corporativo Tuxtla
                </h3>
                <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">
                  1a Av. Norte Poniente #834
                </p>
              </div>
              <div
                class="h-8 w-8 rounded-full bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center text-blue-600 dark:text-blue-400 card-arrow opacity-0 group-hover:opacity-100 transition-opacity"
              >
                <span class="material-icons-round text-sm"
                  >arrow_forward_ios</span
                >
              </div>
            </div>
            <div
              class="mt-4 pt-4 border-t border-slate-200 dark:border-white/10 flex items-center gap-4 text-xs font-medium text-slate-500"
            >
              <span class="flex items-center gap-1"
                ><span class="material-icons-round text-sm">schedule</span> 9am -
                6pm</span
              >
              <span
                class="flex items-center gap-1 text-green-600 dark:text-green-400"
                ><span class="material-icons-round text-sm">check_circle</span> Abierto</span
              >
            </div>
          </button>

          <!-- Card: Tapachula -->
          <button
            class="location-card group text-left w-full p-6 rounded-2xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5 transition-all duration-300 hover:border-blue-500/50 hover:shadow-lg active:scale-[0.99] focus:outline-none ring-offset-2 focus:ring-2 ring-blue-500"
            data-location="tapachula"
            onclick="showMap('tapachula')"
            id="btn-tapachula"
          >
            <div class="flex justify-between items-start">
              <div>
                <h3 class="font-bold text-lg text-slate-900 dark:text-white">
                  Corporativo Tapachula
                </h3>
                <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">
                  4a. Av. Nte. 70, Los Naranjos
                </p>
              </div>
              <div
                class="h-8 w-8 rounded-full bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center text-blue-600 dark:text-blue-400 card-arrow opacity-0 group-hover:opacity-100 transition-opacity"
              >
                <span class="material-icons-round text-sm"
                  >arrow_forward_ios</span
                >
              </div>
            </div>
            <div
              class="mt-4 pt-4 border-t border-slate-200 dark:border-white/10 flex items-center gap-4 text-xs font-medium text-slate-500"
            >
              <span class="flex items-center gap-1"
                ><span class="material-icons-round text-sm">schedule</span> 9am -
                6pm</span
              >
              <span
                class="flex items-center gap-1 text-green-600 dark:text-green-400"
                ><span class="material-icons-round text-sm">check_circle</span> Abierto</span
              >
            </div>
          </button>
        </div>

        <!-- Visualizador de Mapa (Columna Derecha - Sticky) -->
        <div class="lg:col-span-7 relative h-[400px] lg:h-[500px]">
          <div
            class="absolute inset-0 rounded-3xl overflow-hidden border border-slate-200 dark:border-white/10 shadow-2xl bg-slate-100 dark:bg-[#151e2e]"
          >
            <!-- Contenedor de Maps con efecto de transici√≥n -->

            <!-- Map: Tuxtla -->
            <div
              id="tuxtla-map"
              class="map-container absolute inset-0 transition-all duration-500 z-10"
            >
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3820.4196777143943!2d-93.1224185!3d16.7557832!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85ecd8f3d3af5e09%3A0xedacab470275254a!2sLinea%20Digital%20del%20Sureste!5e0!3m2!1ses-419!2smx!4v1741478607844!5m2!1ses-419!2smx"
                class="w-full h-full grayscale-[50%] hover:grayscale-0 transition-all duration-700 dark:invert-[90%] dark:hue-rotate-180 dark:contrast-125"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                title="Ubicaci√≥n Tuxtla Guti√©rrez"></iframe>
              <!-- Overlay para estilizar modo oscuro si el iframe no soporta dark mode nativo -->
              <div
                class="absolute inset-0 pointer-events-none mix-blend-overlay bg-blue-900/10 dark:bg-blue-900/20"
              >
              </div>
            </div>

            <!-- Map: Tapachula -->
            <div
              id="tapachula-map"
              class="map-container absolute inset-0 transition-all duration-500 opacity-0 pointer-events-none z-0"
            >
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3855.4472567510143!2d-92.2621971!3d14.912154999999998!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x858e0ed8913f73ad%3A0xab0ea708b27df293!2sL%C3%ADnea%20Digital%20del%20Sureste%20Tapachula!5e0!3m2!1sen!2smx!4v1763676826030!5m2!1sen!2smx"
                class="w-full h-full grayscale-[50%] hover:grayscale-0 transition-all duration-700 dark:invert-[90%] dark:hue-rotate-180 dark:contrast-125"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                title="Ubicaci√≥n Tapachula"></iframe>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <div class="transition-colors duration-500">
    <Testimonials />
  </div>

  <!-- === LOGICA TS === -->
  <script>
    // Declaraci√≥n de tipos para TypeScript en Astro
    declare global {
      interface Window {
        showMap: (location: string) => void;
      }
    }

    let activeLocation = "tuxtla";

    function updateUI(locationId: string) {
      const locations = ["tuxtla", "tapachula"];

      locations.forEach((loc) => {
        const isSelected = loc === locationId;

        // 1. Manejo del Mapa
        const mapEl = document.getElementById(loc + "-map");
        if (mapEl) {
          if (isSelected) {
            mapEl.style.opacity = "1";
            mapEl.style.zIndex = "10";
            mapEl.style.pointerEvents = "auto";
          } else {
            mapEl.style.opacity = "0";
            mapEl.style.zIndex = "0";
            mapEl.style.pointerEvents = "none";
          }
        }

        // 2. Manejo de Botones (Estilo Activo)
        const btnEl = document.querySelector(`button[data-location="${loc}"]`);
        if (btnEl) {
          if (isSelected) {
            btnEl.classList.add(
              "ring-2",
              "ring-blue-500",
              "bg-white",
              "dark:bg-[#1a2333]",
              "shadow-md"
            );
            btnEl.classList.remove(
              "bg-slate-50",
              "dark:bg-white/5",
              "border-slate-200"
            );
            // Mostrar flecha
            const arrow = btnEl.querySelector(".card-arrow");
            if (arrow) arrow.classList.remove("opacity-0");
          } else {
            btnEl.classList.remove(
              "ring-2",
              "ring-blue-500",
              "bg-white",
              "dark:bg-[#1a2333]",
              "shadow-md"
            );
            btnEl.classList.add(
              "bg-slate-50",
              "dark:bg-white/5",
              "border-slate-200"
            );
            // Ocultar flecha
            const arrow = btnEl.querySelector(".card-arrow");
            if (arrow) arrow.classList.add("opacity-0");
          }
        }
      });
    }

    // Exponer funci√≥n globalmente
    window.showMap = (location) => {
      if (activeLocation === location) return;
      activeLocation = location;
      updateUI(location);
    };

    // Init
    document.addEventListener("DOMContentLoaded", () => {
      updateUI("tuxtla");
    });
  </script>
</BaseLayout>
